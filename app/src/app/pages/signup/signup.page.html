<ion-content>
  <ion-header class="logo-header">
    <img src="../../../assets/logo.png" />
  </ion-header>
  <div class="signup-container">
    <div class="title">
      <h1>Novo Usuário</h1>
    </div>
    <form [formGroup]="credentials" (ngSubmit)="onSubmit()">
      <ion-item>
        <ion-label position="floating">Nome</ion-label>
        <ion-input type="text" formControlName="name"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Email</ion-label>
        <ion-input type="email" formControlName="email"></ion-input>
      </ion-item>
      <div
        *ngIf="email?.invalid && (email?.dirty || email?.touched)"
        class="errors"
      >
        <ion-text color="danger" *ngIf="email?.hasError('required')">
          Email is required
        </ion-text>
        <ion-text color="danger" *ngIf="email?.hasError('email')">
          Email is invalid
        </ion-text>
      </div>
      <ion-item>
        <ion-label position="floating">Departamento</ion-label>
        <ion-select
          aria-label="departamento"
          placeholder="Selecione o departamento"
          formControlName="departments_id"
        >
          <ion-select-option
            *ngFor="let department of departments"
            value="{{department.id}}"
          >
            {{department.name}}
          </ion-select-option>
          >
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Senha</ion-label>
        <ion-input
          type="{{ showPassword ? 'text' : 'password' }}"
          formControlName="password"
        ></ion-input>
        <ion-icon
          [name]="showPassword ? 'eye-outline' : 'eye-off-outline'"
          slot="end"
          (click)="showPassword = !showPassword"
        ></ion-icon>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Confirmar Senha</ion-label>
        <ion-input
          type="{{ showPassword ? 'text' : 'password' }}"
          formControlName="confirmPassword"
        ></ion-input>
        <ion-icon
          [name]="showPassword ? 'eye-outline' : 'eye-off-outline'"
          slot="end"
          (click)="showPassword = !showPassword"
        ></ion-icon>
      </ion-item>
      <ion-button expand="block" type="submit" [disabled]="credentials.invalid"
        >Cadastrar-se</ion-button
      >
      <div style="width: 100%">
        <ion-button expand="block" fill="clear" (click)="navigateToLogin()"
          >Já possui uma conta? Entrar</ion-button
        >
      </div>
    </form>
  </div>
</ion-content>
